sap.ui.define(["sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/UIComponent"],function(e,t,n){"use strict";var o,a;function s(t,n){var a;function s(e){a&&a.getBeginButton().setEnabled(e)}function r(e){a.setBusy(e)}function i(){a&&a.close()}function c(t,n,o){e.error("Upload failed",{title:"Error"})}function m(e){return sap.ui.core.Fragment.byId("excelUploadDialog",e)}return{onBeforeOpen:function(e){debugger},onCancel:function(e){debugger;o&&o.close()}}}return{demo:function(e,t,n){var a=this;this.loadFragment({id:"excelUploadDialog"+(new Date).getTime(),name:"panappbeta.ext.fragment.timeline",controller:s(this,"MediaFile")}).then(async function(e){debugger;function t(){var e=Math.floor(Math.random()*1e6);var t=(new Date).getTime();var n=t+"-"+e;return n}debugger;let a="getcomments";let s=n.getModel().bindContext(`/${a}(...)`);console.log();const r=n.oHeaderContext.sPath;const i=/PAN_Number='([^']+)'/;const c=r.match(i);const m=c?c[1]:null;s.setParameter("ID",m);await s.execute();const l=s.getBoundContext();let u=l.getValue();u=JSON.parse(u.value);const g=[];const d=u[0];if(d==undefined){e.mAggregations.content[0].destroyItems();var f=new sap.suite.ui.commons.TimelineItem({text:"No Comments Found"});e.mAggregations.content[0].addItem(f);e.mAggregations.content[0].addItem(new sap.m.Button(`${"button"+t()}`,{text:"Cancel",press:function(t){debugger;e.close()},layoutData:new sap.m.FlexItemData({growFactor:5,alignSelf:"End"})}))}else{u.forEach(e=>{const t=e.createdAt;const n=e.createdBy;const o=e.modifiedAt;const a=e.modifiedBy;const s=e.idd;const r=e.PAN_Number;const i=e.user;const c=e.Comments;const m=e.status;g.push({firsname:i,lname:m,comment:c,dateTime:t})});o=e;var p=g.length;console.log(p);e.mAggregations.content[0].destroyItems();for(let n=0;n<g.length;n++){debugger;var f=new sap.suite.ui.commons.TimelineItem({id:`${"item"+t()}`,dateTime:`${g[n].dateTime}`,title:`${g[n].lname}`,userNameClickable:false,userNameClicked:"onUserNameClick",select:"onPressItems",userPicture:"Photo",text:`${g[n].comment}`,userName:`${g[n].firsname}`});e.mAggregations.content[0].addItem(f)}e.mAggregations.content[0].addItem(new sap.m.Button(`${"button"+t()}`,{text:"Cancel",press:function(t){debugger;e.close()},layoutData:new sap.m.FlexItemData({growFactor:5,alignSelf:"End"})}))}e.open()})}}});